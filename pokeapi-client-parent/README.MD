# Sample PokeAPI client

## JUnit vs Core AssertJ with common data types

### String

```java
class StringTests {

  private String pokemonSlogan;

  @BeforeEach
  public void initialize() {
    pokemonSlogan = "Gotta Catch 'Em All";
  }

  @Test
  void testContainsJunit() {
    assertTrue(pokemonSlogan.startsWith("Gotta"));
    assertTrue(pokemonSlogan.contains("Catch"));
    assertTrue(pokemonSlogan.endsWith("'Em All"));
  }

  @Test
  void testContainsAssertJ() {
    assertThat(pokemonSlogan).startsWith("Gotta").contains("Catch").endsWith("'Em All");
  }
}
```

### List

```java
class ListTests {
    
    private List<Integer> pokemonDollars;

    @BeforeEach
    public void initialize() {
        pokemonDollars = List.of(50, 100, 200);
    }

    @Test
    void testSizeAndSortingJUnit() {
        assertEquals(3, pokemonDollars.size());
        assertEquals(pokemonDollars.stream().sorted().collect(toList()), pokemonDollars);
    }

    @Test
    void testSizeAndSortingAssertJ() {
        assertThat(pokemonDollars).hasSize(3).isSorted();
    }
}

```

### Map

```java
class MapTests {

    private Map<Integer, String> pokemonMap;

    @BeforeEach
    public void initialize() {
        pokemonMap = Map.of(25, "Pikachu", 282, "Gardevoir", 778, "Mimikyu");
    }

    @Test
    void testValueJunit() {
      assertEquals("Mimikyu", pokemonMap.get(778));
    }
  
    @Test
    void testValueAssertJ() {
      assertThat(pokemonMap).extractingByKey(778).isEqualTo("Mimikyu");
    }

}
```
See all these points (and more) implemented in
* pokeapi-client [jdk test folder](pokeapi-client/src/test/java/com/github/erikrz/jdk).

## JUnit vs Core AssertJ vs Generated AssertJ with custom data types

### JUnit

```java
class PokemonClientJunitTests {

  private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);

    assertEquals("pikachu", pikachu.getName());
    assertEquals(112, pikachu.getBaseExperience());
    assertEquals(60, pikachu.getWeight());
    assertTrue(pikachu.getStats().contains(
            PokemonStat.builder()
                    .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                    .baseStat(35)
                    .effort(0).build()));
  }
}
```

### Core AssertJ

```java
class PokemonClientCoreAssertjTests {

    private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);
    assertThat(pikachu.getName()).isEqualTo("pikachu");
    assertThat(pikachu.getBaseExperience()).isEqualTo(112);
    assertThat(pikachu.getWeight()).isEqualTo(60);
    assertThat(pikachu.getStats()).contains(
            PokemonStat.builder()
                    .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                    .baseStat(35)
                    .effort(0).build());
  }
    
}
```

### Generated AssertJ

```java
class PokemonClientGeneratedAssertJTests {

    private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);
    assertThat(pikachu)
            .hasName("pikachu")
            .hasBaseExperience(112)
            .hasWeight(60)
            .hasStats(
                    PokemonStat.builder()
                            .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                            .baseStat(35)
                            .effort(0).build()
            );
  }
    
}
```

See all these points (and more) implemented in
* pokeapi-client [modules test folder](pokeapi-client/src/test/java/com/github/erikrz/pokeapi/client/modules).


## Local Development

### Prerequisites

* **Open JDK 17**

  You can install any version, i.e. [Amazon Coretto](https://docs.aws.amazon.com/corretto/latest/corretto-17-ug/downloads-list.html).

* **Maven**

  You can use the embedded Maven binaries that your IDE offers, or you can install your own one.
  
### Building all the components

We use Maven as our build tool. Here is the [Maven Build Lifecycle](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html) for reference.

Maven goals commonly used in this project:

| Goals                               | Description                                                                                                                                                                                |
|-------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `clean`                             | Removes all files generated by the previous build. Recommended to run first, before any build goal.                                                                                        |
| `versions:display-property-updates` | Scans the project and produces a report of those properties which are used to control artifact versions and which properties have newer versions available. Recommended to run standalone. |
| `compile`                           | Build goal to compile source code.                                                                                                                                                         |
| `test`                              | `compile` plus compile and run tests.                                                                                                                                                      |
| `package`                           | `test` plus package compiled code into a jar.                                                                                                                                              |
| `install`                           | `package` plus install in local maven repo for other local projects to reuse.                                                                                                              |

Sample maven command goal runs:

* `mvn clean test`
* `mvn clean install`
* `mvn versions:display-property-updates`

Open [pokeapi-client-parent](/) and run `mvn clean install`. This should build the all the necessary artifacts to run and test this project.
In this sample, we consume a RESTFul microservice that returns JSON payload.
