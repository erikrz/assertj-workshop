# Sample PokeAPI client

## JUnit vs Core AssertJ with common data types

See all these points implemented in
* pokeapi-client [jdk test folder](pokeapi-client/src/test/java/com/github/erikrz/jdk).

### String

```java
class StringTests {
    
  private String mexicanPostalCode;

  @BeforeEach
  public void initialize() {
    mexicanPostalCode = "12345";
  }

  @Test
  void testPostalCodeJUnit() {
    assertTrue(mexicanPostalCode.matches("[0-9]+"));
    assertEquals(5, mexicanPostalCode.length());
  }

  @Test
  void testPostalCodeAssert() {
    assertThat(mexicanPostalCode).containsOnlyDigits().hasSize(5);
  }
}
```

## JUnit vs Core AssertJ vs Generated AssertJ with custom data types

See all these points implemented in 
* pokeapi-client [modules test folder](pokeapi-client/src/test/java/com/github/erikrz/pokeapi/client/modules).

### JUnit

```java
class PokemonClientJunitTests {

  private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);

    assertEquals("pikachu", pikachu.getName());
    assertEquals(112, pikachu.getBaseExperience());
    assertEquals(60, pikachu.getWeight());
    assertTrue(pikachu.getStats().contains(
            PokemonStat.builder()
                    .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                    .baseStat(35)
                    .effort(0).build()));
  }
}
```

### Core AssertJ

```java
class PokemonClientCoreAssertjTests {

    private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);
    assertThat(pikachu.getName()).isEqualTo("pikachu");
    assertThat(pikachu.getBaseExperience()).isEqualTo(112);
    assertThat(pikachu.getWeight()).isEqualTo(60);
    assertThat(pikachu.getStats()).contains(
            PokemonStat.builder()
                    .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                    .baseStat(35)
                    .effort(0).build());
  }
    
}
```

### Generated AssertJ

```java
class PokemonClientGeneratedAssertJTests {

    private final PokemonClient pokemonClient = (new PokeApiClientFactory()).buildClient(PokemonClient.class);

  @Test
  void testGetPokemonByNumber() {
    var pikachu = pokemonClient.getPokemon(25);
    assertThat(pikachu)
            .hasName("pikachu")
            .hasBaseExperience(112)
            .hasWeight(60)
            .hasStats(
                    PokemonStat.builder()
                            .stat(new NamedApiResource<>("hp", "https://pokeapi.co/api/v2/stat/1/"))
                            .baseStat(35)
                            .effort(0).build()
            );
  }
    
}
```

## Local Development

### Prerequisites

* **Open JDK 17**

  You can install any version, i.e. [Amazon Coretto](https://docs.aws.amazon.com/corretto/latest/corretto-17-ug/downloads-list.html).

* **Maven**

  You can use the embedded Maven binaries that your IDE offers, or you can install your own one.
  
### Building all the components

We use Maven as our build tool. Here is the [Maven Build Lifecycle](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html) for reference.

Maven goals commonly used in this project:

| Goals                               | Description                                                                                                                                                                                |
|-------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `clean`                             | Removes all files generated by the previous build. Recommended to run first, before any build goal.                                                                                        |
| `versions:display-property-updates` | Scans the project and produces a report of those properties which are used to control artifact versions and which properties have newer versions available. Recommended to run standalone. |
| `compile`                           | Build goal to compile source code.                                                                                                                                                         |
| `test`                              | `compile` plus compile and run tests.                                                                                                                                                      |
| `package`                           | `test` plus package compiled code into a jar.                                                                                                                                              |
| `install`                           | `package` plus install in local maven repo for other local projects to reuse.                                                                                                              |

Sample maven command goal runs:

* `mvn clean test`
* `mvn clean install`
* `mvn versions:display-property-updates`

Open [pokeapi-client-parent](/) and run `mvn clean install`. This should build the all the necessary artifacts to run and test this project.
In this sample, we consume a RESTFul microservice that returns JSON payload.
